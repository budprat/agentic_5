2025-06-27 14:56:28,812 - google_adk.google.adk.models.registry - INFO - Updating LLM class for gemini-.* from <class 'google.adk.models.google_llm.Gemini'> to <class 'google.adk.models.google_llm.Gemini'>
2025-06-27 14:56:28,813 - google_adk.google.adk.models.registry - INFO - Updating LLM class for projects\/.+\/locations\/.+\/endpoints\/.+ from <class 'google.adk.models.google_llm.Gemini'> to <class 'google.adk.models.google_llm.Gemini'>
2025-06-27 14:56:28,813 - google_adk.google.adk.models.registry - INFO - Updating LLM class for projects\/.+\/locations\/.+\/publishers\/google\/models\/gemini.+ from <class 'google.adk.models.google_llm.Gemini'> to <class 'google.adk.models.google_llm.Gemini'>
2025-06-27 14:56:28,813 - google_adk.google.adk.models.registry - INFO - Updating LLM class for gemini-.* from <class 'google.adk.models.google_llm.Gemini'> to <class 'google.adk.models.google_llm.Gemini'>
2025-06-27 14:56:28,813 - google_adk.google.adk.models.registry - INFO - Updating LLM class for projects\/.+\/locations\/.+\/endpoints\/.+ from <class 'google.adk.models.google_llm.Gemini'> to <class 'google.adk.models.google_llm.Gemini'>
2025-06-27 14:56:28,813 - google_adk.google.adk.models.registry - INFO - Updating LLM class for projects\/.+\/locations\/.+\/publishers\/google\/models\/gemini.+ from <class 'google.adk.models.google_llm.Gemini'> to <class 'google.adk.models.google_llm.Gemini'>
2025-06-27 14:56:29,357 - src.a2a_mcp.agents.market_oracle.fundamental_analyst_agent - INFO - Initializing Fundamental Analyst
2025-06-27 14:56:30,260 - httpx - INFO - HTTP Request: POST https://udjwjoymlofdocclufxv.supabase.co/rest/v1/trading_signals "HTTP/2 201 Created"
2025-06-27 14:56:30,266 - src.a2a_mcp.common.brightdata_cache - INFO - Cache hit (file) for TSLA
2025-06-27 14:56:30,266 - src.a2a_mcp.agents.market_oracle.sentiment_seeker_agent_brightdata - INFO - Sentiment Seeker analyzing: Analyze TSLA (session: test_sentiment_seeker)
2025-06-27 14:56:30,267 - a2a_mcp.common.brightdata_cache - INFO - Cache hit (file) for TSLA
2025-06-27 14:56:30,267 - src.a2a_mcp.agents.market_oracle.sentiment_seeker_agent_brightdata - INFO - Using cached data for TSLA
2025-06-27 14:56:30,267 - src.a2a_mcp.agents.market_oracle.sentiment_seeker_agent_brightdata - INFO - Fetching stock predictions for TSLA
2025-06-27 14:56:30,268 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-06-27 14:56:33,458 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent "HTTP/1.1 200 OK"
2025-06-27 14:56:33,460 - google_genai.models - INFO - AFC remote call 1 is done.
2025-06-27 14:56:33,701 - httpx - INFO - HTTP Request: POST https://udjwjoymlofdocclufxv.supabase.co/rest/v1/sentiment_data "HTTP/2 201 Created"
2025-06-27 14:56:33,703 - src.a2a_mcp.agents.market_oracle.fundamental_analyst_agent - INFO - Fundamental Analyst analyzing: Analyze TSLA (session: test_fundamental_analyst)
2025-06-27 14:56:33,704 - src.a2a_mcp.agents.market_oracle.fundamental_analyst_agent - INFO - Initializing Fundamental Analyst with MCP tools
2025-06-27 14:56:33,746 - httpx - INFO - HTTP Request: GET http://localhost:10100/sse "HTTP/1.1 200 OK"
2025-06-27 14:56:33,752 - httpx - INFO - HTTP Request: POST http://localhost:10100/messages/?session_id=4354112f702f449c9f4053f0b17cb450 "HTTP/1.1 202 Accepted"
2025-06-27 14:56:33,757 - httpx - INFO - HTTP Request: POST http://localhost:10100/messages/?session_id=4354112f702f449c9f4053f0b17cb450 "HTTP/1.1 202 Accepted"
2025-06-27 14:56:33,759 - httpx - INFO - HTTP Request: POST http://localhost:10100/messages/?session_id=4354112f702f449c9f4053f0b17cb450 "HTTP/1.1 202 Accepted"
2025-06-27 14:56:33,767 - google_adk.google.adk.tools.base_authenticated_tool - WARNING - auth_config or auth_config.auth_scheme is missing. Will skip authentication.Using FunctionTool instead if authentication is not required.
2025-06-27 14:56:33,770 - google_adk.google.adk.tools.base_authenticated_tool - WARNING - auth_config or auth_config.auth_scheme is missing. Will skip authentication.Using FunctionTool instead if authentication is not required.
2025-06-27 14:56:33,774 - google_adk.google.adk.tools.base_authenticated_tool - WARNING - auth_config or auth_config.auth_scheme is missing. Will skip authentication.Using FunctionTool instead if authentication is not required.
2025-06-27 14:56:33,777 - google_adk.google.adk.tools.base_authenticated_tool - WARNING - auth_config or auth_config.auth_scheme is missing. Will skip authentication.Using FunctionTool instead if authentication is not required.
2025-06-27 14:56:33,780 - google_adk.google.adk.tools.base_authenticated_tool - WARNING - auth_config or auth_config.auth_scheme is missing. Will skip authentication.Using FunctionTool instead if authentication is not required.
2025-06-27 14:56:33,783 - google_adk.google.adk.tools.base_authenticated_tool - WARNING - auth_config or auth_config.auth_scheme is missing. Will skip authentication.Using FunctionTool instead if authentication is not required.
2025-06-27 14:56:33,787 - google_adk.google.adk.tools.base_authenticated_tool - WARNING - auth_config or auth_config.auth_scheme is missing. Will skip authentication.Using FunctionTool instead if authentication is not required.
2025-06-27 14:56:33,787 - src.a2a_mcp.agents.market_oracle.technical_prophet_agent - INFO - Technical Prophet analyzing: Analyze TSLA
2025-06-27 14:56:33,788 - src.a2a_mcp.agents.market_oracle.technical_prophet_agent - ERROR - Error fetching historical signals: SupabaseClient.get_latest_signals() got an unexpected keyword argument 'agent_name'
2025-06-27 14:56:33,835 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-06-27 14:56:34,261 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent "HTTP/1.1 200 OK"
2025-06-27 14:56:34,262 - google_genai.models - INFO - AFC remote call 1 is done.
2025-06-27 14:56:34,265 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-06-27 14:56:37,565 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent "HTTP/1.1 200 OK"
2025-06-27 14:56:37,567 - google_genai.models - INFO - AFC remote call 1 is done.
2025-06-27 14:56:37,986 - httpx - INFO - HTTP Request: POST https://udjwjoymlofdocclufxv.supabase.co/rest/v1/trading_signals "HTTP/2 201 Created"
2025-06-27 14:56:38,397 - httpx - INFO - HTTP Request: POST https://udjwjoymlofdocclufxv.supabase.co/rest/v1/market_trends "HTTP/2 201 Created"
2025-06-27 14:56:38,398 - src.a2a_mcp.agents.market_oracle.risk_guardian_agent - INFO - Risk Guardian analyzing: Analyze TSLA
2025-06-27 14:56:38,682 - httpx - INFO - HTTP Request: GET https://udjwjoymlofdocclufxv.supabase.co/rest/v1/portfolios?select=%2A%2Cpositions%28%2A%29&user_id=eq.demo_user&limit=1 "HTTP/2 200 OK"
2025-06-27 14:56:38,854 - httpx - INFO - HTTP Request: GET https://udjwjoymlofdocclufxv.supabase.co/rest/v1/risk_metrics?select=%2A&portfolio_id=eq.0facb728-6f3b-4209-86ba-b8633f51d760&order=calculated_at.desc&limit=1 "HTTP/2 200 OK"
2025-06-27 14:56:38,855 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-06-27 14:56:43,323 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent "HTTP/1.1 200 OK"
2025-06-27 14:56:43,325 - google_genai.models - INFO - AFC remote call 1 is done.
2025-06-27 14:56:43,481 - httpx - INFO - HTTP Request: POST https://udjwjoymlofdocclufxv.supabase.co/rest/v1/risk_metrics "HTTP/2 201 Created"
2025-06-27 14:56:43,648 - httpx - INFO - HTTP Request: POST https://udjwjoymlofdocclufxv.supabase.co/rest/v1/trading_signals "HTTP/2 201 Created"
2025-06-27 14:56:43,649 - src.a2a_mcp.agents.market_oracle.trend_correlator_agent - INFO - Trend Correlator analyzing: Analyze TSLA
2025-06-27 14:56:44,073 - httpx - INFO - HTTP Request: GET https://udjwjoymlofdocclufxv.supabase.co/rest/v1/market_trends?select=%2A&symbol=eq.TSLA&order=timestamp.desc&limit=20 "HTTP/2 200 OK"
2025-06-27 14:56:44,074 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-06-27 14:56:47,951 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent "HTTP/1.1 200 OK"
2025-06-27 14:56:47,952 - google_genai.models - INFO - AFC remote call 1 is done.
2025-06-27 14:56:48,117 - httpx - INFO - HTTP Request: POST https://udjwjoymlofdocclufxv.supabase.co/rest/v1/market_trends "HTTP/2 400 Bad Request"
2025-06-27 14:56:48,117 - src.a2a_mcp.agents.market_oracle.trend_correlator_agent - ERROR - Trend Correlator error: {'message': 'invalid input syntax for type integer: "80.5"', 'code': '22P02', 'hint': None, 'details': None}
2025-06-27 14:56:48,117 - src.a2a_mcp.agents.market_oracle.report_synthesizer_agent - INFO - Report Synthesizer generating report: Analyze TSLA
2025-06-27 14:56:48,544 - httpx - INFO - HTTP Request: GET https://udjwjoymlofdocclufxv.supabase.co/rest/v1/trading_signals?select=%2A&symbol=eq.TSLA&order=created_at.desc&limit=20 "HTTP/2 200 OK"
2025-06-27 14:56:48,708 - httpx - INFO - HTTP Request: GET https://udjwjoymlofdocclufxv.supabase.co/rest/v1/investment_research?select=%2A&symbol=eq.TSLA&order=created_at.desc&limit=1 "HTTP/2 200 OK"
2025-06-27 14:56:48,870 - httpx - INFO - HTTP Request: GET https://udjwjoymlofdocclufxv.supabase.co/rest/v1/sentiment_data?select=%2A&symbol=eq.TSLA&order=timestamp.desc&limit=10 "HTTP/2 200 OK"
2025-06-27 14:56:49,029 - httpx - INFO - HTTP Request: GET https://udjwjoymlofdocclufxv.supabase.co/rest/v1/market_trends?select=%2A&symbol=eq.TSLA&order=timestamp.desc&limit=10 "HTTP/2 200 OK"
2025-06-27 14:56:49,176 - httpx - INFO - HTTP Request: GET https://udjwjoymlofdocclufxv.supabase.co/rest/v1/portfolios?select=%2A%2Cpositions%28%2A%29&user_id=eq.demo_user&limit=1 "HTTP/2 200 OK"
2025-06-27 14:56:49,176 - src.a2a_mcp.agents.market_oracle.report_synthesizer_agent - ERROR - Report Synthesizer error: name 'timedelta' is not defined
2025-06-27 14:56:49,177 - src.a2a_mcp.agents.market_oracle.audio_briefer_agent - INFO - Audio Briefer generating briefing: Analyze TSLA
2025-06-27 14:56:49,335 - httpx - INFO - HTTP Request: GET https://udjwjoymlofdocclufxv.supabase.co/rest/v1/portfolios?select=%2A%2Cpositions%28%2A%29&user_id=eq.demo_user&limit=1 "HTTP/2 200 OK"
2025-06-27 14:56:49,502 - httpx - INFO - HTTP Request: GET https://udjwjoymlofdocclufxv.supabase.co/rest/v1/trading_signals?select=%2A&created_at=gte.2025-06-26T14%3A56%3A49.336433&order=confidence_score.desc&limit=10 "HTTP/2 200 OK"
2025-06-27 14:56:49,654 - httpx - INFO - HTTP Request: GET https://udjwjoymlofdocclufxv.supabase.co/rest/v1/risk_metrics?select=%2A&portfolio_id=eq.0facb728-6f3b-4209-86ba-b8633f51d760&order=calculated_at.desc&limit=1 "HTTP/2 200 OK"
2025-06-27 14:56:49,808 - httpx - INFO - HTTP Request: GET https://udjwjoymlofdocclufxv.supabase.co/rest/v1/investment_research?select=%2A&created_at=gte.2025-06-26T14%3A56%3A49.336433&order=created_at.desc&limit=5 "HTTP/2 200 OK"
2025-06-27 14:56:49,809 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-06-27 14:56:54,776 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent "HTTP/1.1 200 OK"
2025-06-27 14:56:54,778 - google_genai.models - INFO - AFC remote call 1 is done.
2025-06-27 14:56:54,779 - src.a2a_mcp.agents.market_oracle.oracle_prime_agent_supabase - INFO - Oracle Prime Supabase analyzing: Provide a complete market analysis for TSLA including sentiment, technical analysis, and risk assessment (session: workflow_test)
2025-06-27 14:56:54,936 - httpx - INFO - HTTP Request: GET https://udjwjoymlofdocclufxv.supabase.co/rest/v1/portfolios?select=%2A&user_id=eq.demo_user&limit=1 "HTTP/2 200 OK"
2025-06-27 14:56:55,090 - httpx - INFO - HTTP Request: GET https://udjwjoymlofdocclufxv.supabase.co/rest/v1/positions?select=%2A&portfolio_id=eq.0facb728-6f3b-4209-86ba-b8633f51d760&exit_date=is.null "HTTP/2 200 OK"
2025-06-27 14:56:55,254 - httpx - INFO - HTTP Request: GET https://udjwjoymlofdocclufxv.supabase.co/rest/v1/risk_metrics?select=%2A&portfolio_id=eq.0facb728-6f3b-4209-86ba-b8633f51d760&order=calculated_at.desc&limit=1 "HTTP/2 200 OK"
2025-06-27 14:56:55,409 - httpx - INFO - HTTP Request: GET https://udjwjoymlofdocclufxv.supabase.co/rest/v1/trading_signals?select=%2A&symbol=eq.TSLA&order=created_at.desc&limit=5 "HTTP/2 200 OK"
2025-06-27 14:56:55,410 - src.a2a_mcp.agents.market_oracle.oracle_prime_agent_supabase - INFO - Fetching predictions for TSLA using Stock MCP client
2025-06-27 14:56:55,470 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-06-27 14:56:59,159 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent "HTTP/1.1 200 OK"
2025-06-27 14:56:59,161 - google_genai.models - INFO - AFC remote call 1 is done.
2025-06-27 14:56:59,325 - httpx - INFO - HTTP Request: POST https://udjwjoymlofdocclufxv.supabase.co/rest/v1/trading_signals "HTTP/2 201 Created"
2025-06-27 14:56:59,479 - httpx - INFO - HTTP Request: POST https://udjwjoymlofdocclufxv.supabase.co/rest/v1/investment_research "HTTP/2 201 Created"
2025-06-27 14:56:59,480 - src.a2a_mcp.agents.market_oracle.oracle_prime_agent_supabase - INFO - Oracle Prime Supabase analyzing: What is the Reddit sentiment for AAPL? (session: perf_Simple sentiment)
2025-06-27 14:56:59,639 - httpx - INFO - HTTP Request: GET https://udjwjoymlofdocclufxv.supabase.co/rest/v1/portfolios?select=%2A&user_id=eq.demo_user&limit=1 "HTTP/2 200 OK"
2025-06-27 14:56:59,796 - httpx - INFO - HTTP Request: GET https://udjwjoymlofdocclufxv.supabase.co/rest/v1/positions?select=%2A&portfolio_id=eq.0facb728-6f3b-4209-86ba-b8633f51d760&exit_date=is.null "HTTP/2 200 OK"
2025-06-27 14:57:00,253 - httpx - INFO - HTTP Request: GET https://udjwjoymlofdocclufxv.supabase.co/rest/v1/risk_metrics?select=%2A&portfolio_id=eq.0facb728-6f3b-4209-86ba-b8633f51d760&order=calculated_at.desc&limit=1 "HTTP/2 200 OK"
2025-06-27 14:57:00,411 - httpx - INFO - HTTP Request: GET https://udjwjoymlofdocclufxv.supabase.co/rest/v1/trading_signals?select=%2A&symbol=eq.AAPL&order=created_at.desc&limit=5 "HTTP/2 200 OK"
2025-06-27 14:57:00,412 - src.a2a_mcp.agents.market_oracle.oracle_prime_agent_supabase - INFO - Fetching predictions for AAPL using Stock MCP client
2025-06-27 14:57:00,479 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-06-27 14:57:03,572 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent "HTTP/1.1 200 OK"
2025-06-27 14:57:03,574 - google_genai.models - INFO - AFC remote call 1 is done.
2025-06-27 14:57:03,728 - httpx - INFO - HTTP Request: POST https://udjwjoymlofdocclufxv.supabase.co/rest/v1/trading_signals "HTTP/2 201 Created"
2025-06-27 14:57:03,893 - httpx - INFO - HTTP Request: POST https://udjwjoymlofdocclufxv.supabase.co/rest/v1/investment_research "HTTP/2 201 Created"
2025-06-27 14:57:03,894 - src.a2a_mcp.agents.market_oracle.oracle_prime_agent_supabase - INFO - Oracle Prime Supabase analyzing: Provide technical analysis for NVDA (session: perf_Technical analysis)
2025-06-27 14:57:04,045 - httpx - INFO - HTTP Request: GET https://udjwjoymlofdocclufxv.supabase.co/rest/v1/portfolios?select=%2A&user_id=eq.demo_user&limit=1 "HTTP/2 200 OK"
2025-06-27 14:57:04,196 - httpx - INFO - HTTP Request: GET https://udjwjoymlofdocclufxv.supabase.co/rest/v1/positions?select=%2A&portfolio_id=eq.0facb728-6f3b-4209-86ba-b8633f51d760&exit_date=is.null "HTTP/2 200 OK"
2025-06-27 14:57:04,346 - httpx - INFO - HTTP Request: GET https://udjwjoymlofdocclufxv.supabase.co/rest/v1/risk_metrics?select=%2A&portfolio_id=eq.0facb728-6f3b-4209-86ba-b8633f51d760&order=calculated_at.desc&limit=1 "HTTP/2 200 OK"
2025-06-27 14:57:04,503 - httpx - INFO - HTTP Request: GET https://udjwjoymlofdocclufxv.supabase.co/rest/v1/trading_signals?select=%2A&symbol=eq.NVDA&order=created_at.desc&limit=5 "HTTP/2 200 OK"
2025-06-27 14:57:04,504 - src.a2a_mcp.agents.market_oracle.oracle_prime_agent_supabase - INFO - Fetching predictions for NVDA using Stock MCP client
2025-06-27 14:57:04,554 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-06-27 14:57:07,831 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent "HTTP/1.1 200 OK"
2025-06-27 14:57:07,833 - google_genai.models - INFO - AFC remote call 1 is done.
2025-06-27 14:57:07,993 - httpx - INFO - HTTP Request: POST https://udjwjoymlofdocclufxv.supabase.co/rest/v1/trading_signals "HTTP/2 201 Created"
2025-06-27 14:57:08,151 - httpx - INFO - HTTP Request: POST https://udjwjoymlofdocclufxv.supabase.co/rest/v1/investment_research "HTTP/2 201 Created"
2025-06-27 14:57:08,152 - src.a2a_mcp.agents.market_oracle.oracle_prime_agent_supabase - INFO - Oracle Prime Supabase analyzing: Full market analysis for TSLA (session: perf_Complete analysis)
2025-06-27 14:57:08,307 - httpx - INFO - HTTP Request: GET https://udjwjoymlofdocclufxv.supabase.co/rest/v1/portfolios?select=%2A&user_id=eq.demo_user&limit=1 "HTTP/2 200 OK"
2025-06-27 14:57:08,480 - httpx - INFO - HTTP Request: GET https://udjwjoymlofdocclufxv.supabase.co/rest/v1/positions?select=%2A&portfolio_id=eq.0facb728-6f3b-4209-86ba-b8633f51d760&exit_date=is.null "HTTP/2 200 OK"
2025-06-27 14:57:08,630 - httpx - INFO - HTTP Request: GET https://udjwjoymlofdocclufxv.supabase.co/rest/v1/risk_metrics?select=%2A&portfolio_id=eq.0facb728-6f3b-4209-86ba-b8633f51d760&order=calculated_at.desc&limit=1 "HTTP/2 200 OK"
2025-06-27 14:57:08,779 - httpx - INFO - HTTP Request: GET https://udjwjoymlofdocclufxv.supabase.co/rest/v1/trading_signals?select=%2A&symbol=eq.TSLA&order=created_at.desc&limit=5 "HTTP/2 200 OK"
2025-06-27 14:57:08,780 - src.a2a_mcp.agents.market_oracle.oracle_prime_agent_supabase - INFO - Fetching predictions for TSLA using Stock MCP client
2025-06-27 14:57:08,837 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-06-27 14:57:12,277 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent "HTTP/1.1 200 OK"
2025-06-27 14:57:12,279 - google_genai.models - INFO - AFC remote call 1 is done.
2025-06-27 14:57:12,443 - httpx - INFO - HTTP Request: POST https://udjwjoymlofdocclufxv.supabase.co/rest/v1/trading_signals "HTTP/2 201 Created"
2025-06-27 14:57:12,605 - httpx - INFO - HTTP Request: POST https://udjwjoymlofdocclufxv.supabase.co/rest/v1/investment_research "HTTP/2 201 Created"
2025-06-27 14:57:12,611 - asyncio - ERROR - Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x7fe9ae943590>
2025-06-27 14:57:12,611 - asyncio - ERROR - Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x7fe9aee2e610>
2025-06-27 14:57:12,637 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-24' coro=<<async_generator_athrow without __name__>()> exception=RuntimeError('aclose(): asynchronous generator is already running')>
RuntimeError: aclose(): asynchronous generator is already running
2025-06-27 14:57:12,637 - asyncio - ERROR - unhandled exception during asyncio.run() shutdown
task: <Task finished name='Task-14' coro=<<async_generator_athrow without __name__>()> exception=RuntimeError('Attempted to exit cancel scope in a different task than it was entered in')>
  + Exception Group Traceback (most recent call last):
  |   File "/home/coder/project/a2a-mcp/.venv/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | BaseExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/home/coder/project/a2a-mcp/.venv/lib/python3.11/site-packages/httpx/_client.py", line 1590, in stream
    |     yield response
    |   File "/home/coder/project/a2a-mcp/.venv/lib/python3.11/site-packages/httpx_sse/_api.py", line 75, in aconnect_sse
    |     yield EventSource(response)
    |   File "/home/coder/project/a2a-mcp/.venv/lib/python3.11/site-packages/mcp/client/sse.py", line 138, in sse_client
    |     yield read_stream, write_stream
    | asyncio.exceptions.CancelledError
    | 
    | During handling of the above exception, another exception occurred:
    | 
    | Traceback (most recent call last):
    |   File "/home/coder/project/a2a-mcp/.venv/lib/python3.11/site-packages/mcp/client/sse.py", line 58, in sse_client
    |     async with aconnect_sse(
    |   File "/usr/lib/python3.11/contextlib.py", line 222, in __aexit__
    |     await self.gen.athrow(typ, value, traceback)
    |   File "/home/coder/project/a2a-mcp/.venv/lib/python3.11/site-packages/httpx_sse/_api.py", line 74, in aconnect_sse
    |     async with client.stream(method, url, headers=headers, **kwargs) as response:
    | GeneratorExit
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/coder/project/a2a-mcp/.venv/lib/python3.11/site-packages/mcp/client/sse.py", line 54, in sse_client
    async with anyio.create_task_group() as tg:
  File "/home/coder/project/a2a-mcp/.venv/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 778, in __aexit__
    if self.cancel_scope.__exit__(type(exc), exc, exc.__traceback__):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/coder/project/a2a-mcp/.venv/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 457, in __exit__
    raise RuntimeError(
RuntimeError: Attempted to exit cancel scope in a different task than it was entered in
2025-06-27 14:57:12,973 - asyncio - ERROR - Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x7fe9adfc92d0>
