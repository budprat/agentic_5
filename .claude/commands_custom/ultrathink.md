Please Ultra Think through this
Start by Exploring the codebase and gathering the necessary context
You should use sub agents where it makes sense
I want you to explore, plan and implement the following: 