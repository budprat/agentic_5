warning: `uv run` is experimental and may change without warning.
/home/user/solopreneur/.venv/lib/python3.13/site-packages/websockets/legacy/__init__.py:6: DeprecationWarning: websockets.legacy is deprecated; see https://websockets.readthedocs.io/en/stable/howto/upgrade.html for upgrade instructions
  warnings.warn(  # deprecated in 14.0 - 2024-11-09
/home/user/solopreneur/.venv/lib/python3.13/site-packages/uvicorn/protocols/websockets/websockets_impl.py:17: DeprecationWarning: websockets.server.WebSocketServerProtocol is deprecated
  from websockets.server import WebSocketServerProtocol
INFO:     Started server process [32735]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://localhost:10901 (Press CTRL+C to quit)
/home/user/solopreneur/.venv/lib/python3.13/site-packages/websockets/legacy/server.py:1178: DeprecationWarning: remove second argument of ws_handler
  warnings.warn("remove second argument of ws_handler", DeprecationWarning)
INFO:     127.0.0.1:60986 - "WebSocket /ws" 403
INFO:     connection rejected (403 Forbidden)
INFO:     connection closed
INFO:     127.0.0.1:47162 - "WebSocket /ws" 403
INFO:     connection rejected (403 Forbidden)
INFO:     connection closed
INFO:     127.0.0.1:47174 - "POST / HTTP/1.1" 200 OK
HTTP 404 from personal_optimization agent
Solopreneur Oracle error: GOOGLE_API_KEY environment variable not set
ERROR:    Exception in ASGI application
  + Exception Group Traceback (most recent call last):
  |   File "/home/user/solopreneur/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
  |     result = await app(  # type: ignore[func-returns-value]
  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  |         self.scope, self.receive, self.send
  |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  |     )
  |     ^
  |   File "/home/user/solopreneur/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
  |     return await self.app(scope, receive, send)
  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  |   File "/home/user/solopreneur/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
  |     await self.middleware_stack(scope, receive, send)
  |   File "/home/user/solopreneur/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
  |     raise exc
  |   File "/home/user/solopreneur/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
  |     await self.app(scope, receive, _send)
  |   File "/home/user/solopreneur/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  |   File "/home/user/solopreneur/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
  |     raise exc
  |   File "/home/user/solopreneur/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
  |     await app(scope, receive, sender)
  |   File "/home/user/solopreneur/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
  |     await self.middleware_stack(scope, receive, send)
  |   File "/home/user/solopreneur/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
  |     await route.handle(scope, receive, send)
  |   File "/home/user/solopreneur/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
  |     await self.app(scope, receive, send)
  |   File "/home/user/solopreneur/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  |   File "/home/user/solopreneur/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
  |     raise exc
  |   File "/home/user/solopreneur/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
  |     await app(scope, receive, sender)
  |   File "/home/user/solopreneur/.venv/lib/python3.13/site-packages/starlette/routing.py", line 74, in app
  |     await response(scope, receive, send)
  |   File "/home/user/solopreneur/.venv/lib/python3.13/site-packages/sse_starlette/sse.py", line 237, in __call__
  |     async with anyio.create_task_group() as task_group:
  |                ~~~~~~~~~~~~~~~~~~~~~~~^^
  |   File "/home/user/solopreneur/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  |         "unhandled errors in a TaskGroup", self._exceptions
  |     ) from None
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/home/user/solopreneur/.venv/lib/python3.13/site-packages/sse_starlette/sse.py", line 240, in cancel_on_finish
    |     await coro()
    |   File "/home/user/solopreneur/.venv/lib/python3.13/site-packages/sse_starlette/sse.py", line 159, in _stream_response
    |     async for data in self.body_iterator:
    |     ...<10 lines>...
    |             raise SendTimeoutError()
    |   File "/home/user/solopreneur/.venv/lib/python3.13/site-packages/a2a/server/apps/jsonrpc/jsonrpc_app.py", line 374, in event_generator
    |     async for item in stream:
    |         yield {'data': item.root.model_dump_json(exclude_none=True)}
    |   File "/home/user/solopreneur/.venv/lib/python3.13/site-packages/a2a/server/request_handlers/jsonrpc_handler.py", line 127, in on_message_send_stream
    |     async for event in self.request_handler.on_message_send_stream(
    |     ...<13 lines>...
    |         )
    |   File "/home/user/solopreneur/.venv/lib/python3.13/site-packages/a2a/server/request_handlers/default_request_handler.py", line 351, in on_message_send_stream
    |     await self._cleanup_producer(producer_task, task_id)
    |   File "/home/user/solopreneur/.venv/lib/python3.13/site-packages/a2a/utils/telemetry.py", line 161, in async_wrapper
    |     result = await func(*args, **kwargs)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/user/solopreneur/.venv/lib/python3.13/site-packages/a2a/server/request_handlers/default_request_handler.py", line 366, in _cleanup_producer
    |     await producer_task
    |   File "/home/user/solopreneur/.venv/lib/python3.13/site-packages/a2a/utils/telemetry.py", line 161, in async_wrapper
    |     result = await func(*args, **kwargs)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/user/solopreneur/.venv/lib/python3.13/site-packages/a2a/server/request_handlers/default_request_handler.py", line 174, in _run_event_stream
    |     await self.agent_executor.execute(request, queue)
    |   File "/home/user/solopreneur/.venv/lib/python3.13/site-packages/a2a_mcp/common/agent_executor.py", line 69, in execute
    |     if item['response_type'] == 'data':
    |        ~~~~^^^^^^^^^^^^^^^^^
    | KeyError: 'response_type'
    +------------------------------------
INFO:     127.0.0.1:53988 - "GET / HTTP/1.1" 405 Method Not Allowed
INFO:     127.0.0.1:43354 - "GET /health HTTP/1.1" 404 Not Found
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [32735]
